<form>
	<meta http-equiv="Content-Type" content="text/html; charset=gbk">
		<a href="" class="btn btn-default" ng-if="(editType === 1) || (editType === '1')" ng-click="addLayer()">鏂板灞�</a>
        <br/>
        <tabset >
            <tab ng-repeat = "layer in dangerUnitFacEnquiry.feoXLayerVos">
            
            	<tab-heading>
                    {{layer.layerNo}}
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" ng-if="editTypeFlag">
                         <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" ng-if="editTypeFlag">
                        <li>
							<a href="" class="btn btn-danger" ng-click="removeLayer(riskunitsFacPlyInfo.feoXLayerVos,layer)">鍒犻櫎灞倇{layer.layerNo}}</a>
						</li>
                    </ul>
                </tab-heading>
            
                <hr>
                <h4>灞備俊鎭�</h4>
                <div style="overflow: scroll">
                    <table class="table table-bordered" >
                        <thead>
                        	<tr>
                        		<td nowrap>灞傚彿</td>
	                            <td nowrap>甯佸埆</td>
	                            <td nowrap>鍏ㄥ崟璧疯禂鐐�</td>
	                            <td nowrap>鍏ㄥ崟璧斿伩闄愰</td>
	                            <td nowrap>鍏ㄥ崟鍒嗗嚭姣斾緥</td>
	                            <td nowrap>璧疯禂鐐�</td>
	                            <td nowrap>璧斿伩闄愰</td>
	                            <td>灞備繚璐�</td>
	                            <td nowrap>灞備繚璐瑰彉鍖栭噺</td>
	                            <td nowrap>鍒嗗嚭浠介</td>
	                            <td nowrap>灞傚垎淇濊垂</td>
	                            <td nowrap>灞傚垎淇濊垂鍙樺寲閲�</td>
                        	</tr>
                        </thead>
                        <tr >
                            <td>{{layer.layerNo}}</td>
                            
                            
                            
                            <td>
                            	<select ng-if="editTypeFlag" ng-model="layer.currency"  ng-options="c.id as c.value for c in currencys" 
				                        ></select>
		                        <div ng-if="pageFlag || !editTypeFlag">
		                        	{{layer.currency | code:'currency'}}
		                        </div>
                            </td>
                            
                            
                            
                            <td>
                            	<div ng-if="editTypeFlag" class="input-group">
	                                <input  type="text" ng-model="layer.absExcessLoss" 
	                                	ng-keyup="layer.excessLoss=intentionCalculator('nprop','getQipeidian',recepter,riskunit, layer)" 
	                                	currency />
                                	<span></span>
                               	</div>
                               	<div ng-if="pageFlag || !editTypeFlag">
		                        	{{layer.absExcessLoss | currency}}
		                        </div>
                            </td>
                            
                            
                            
                            <td>
                            	<div ng-if="editTypeFlag" class="input-group">
	                            	<input ng-if="editTypeFlag" type="text" ng-model="layer.absLayerQuota" 
	                            		ng-keyup="layer.layerQuota=intentionCalculator('nprop','getPeichangxiane',recepter,riskunit, layer)"
	                            		currency/>
                            		<span></span>
                           		</div>
                           		<div ng-if="pageFlag || !editTypeFlag">
		                        	{{layer.absLayerQuota | currency}}
		                        </div>
                            </td>
                            
                            
                            
                            <td>
                            	<input size="20" ng-if="editTypeFlag" type="text" ng-model="layer.absShareRate" percentage
                           			ng-keyup="layer.shareRate=intentionCalculator('nprop','getFenchufeneNprop',recepter,riskunit, layer);
                           			layer.layerrePreium=intentionCalculator('nprop','getCengfenbaofei',recepter,riskunit, layer)"
                            		/>
                           		<div ng-if="pageFlag || !editTypeFlag">
                           			<input type="text" ng-readonly="true" style="border:none" ng-model="layer.absShareRate" percentage />
		                        </div>
                            </td>
                            
                            
                            
                            <td>
                            	<div class="input-group" >
	                            	<input type="text" ng-if="editTypeFlag"
	                            		ng-model="layer.excessLoss" currency
	                            		ng-keyup="layer.absExcessLoss=intentionCalculator('nprop','getQuandanQipeidian',recepter,riskunit, layer)" />
                           			<span></span>
                           		</div>
                           		<div ng-if="pageFlag || !editTypeFlag">
		                        	{{layer.excessLoss | currency}}
		                        </div>
                            </td>
                            
                            
                            
                            <td>
                            	<div class="input-group" >
	                            	<input type="text" ng-if="editTypeFlag"
	                            		ng-model="layer.layerQuota" currency
	                            		ng-keyup="layer.absLayerQuota=intentionCalculator('nprop','getQuandanPeichangxiane',recepter,riskunit, layer)"/>
                            		<span></span>
                           		</div>
                            	<div ng-if="pageFlag || !editTypeFlag">
		                        	{{layer.layerQuota | currency}}
		                        </div>
                            </td>
                            
                            
                            
                            <td>
                            	<div class="input-group">
									<input type="text" ng-if="editTypeFlag"
	                            		ng-model="layer.layerPremium" currency
	                            		ng-keyup="layer.absLayerQuota=intentionCalculator('nprop','getQuandanPeichangxiane',recepter,riskunit, layer)"/>
									<span></span>
	                            	<div ng-if="pageFlag || !editTypeFlag">
			                        	{{layer.layerPremium | currency}}
			                        </div>
		                        </div>
                            </td>
                            
                            
                            
                            <td  class="input-group">
								<input type="text" ng-if="editTypeFlag"
									ng-model="layer.layerchgPremium"   currency
									ng-readonly="true" />
								<span></span>
                            	<div ng-if="pageFlag || !editTypeFlag">
		                        	{{layer.layerchgPremium | currency}}
		                        </div>
                            </td>
                            
                            
                            
                            <td>
                            	<div class="input-group">
									<input type="text" ng-if="editTypeFlag"
	                            		ng-model="layer.layerQuota" currency
	                            		ng-keyup="layer.absLayerQuota=intentionCalculator('nprop','getQuandanPeichangxiane',recepter,riskunit, layer)"/>
									<span></span>
	                            	<div ng-if="pageFlag || !editTypeFlag">
			                        	<!-- {{layer.shareRate | currency}}% -->
			                        	<input type="text" ng-readonly="true" style="border:none" ng-model="layer.shareRate" percentage />
			                        </div>
		                        </div>
                            </td>
                            
                            
                            
                            <td>
	                            <div class="input-group">
									<input type="text" ng-if="editTypeFlag"
		                           		ng-model="layer.layerrePreium" currency
		                           		ng-keyup="layer.absLayerQuota=intentionCalculator('nprop','getQuandanPeichangxiane',recepter,riskunit, layer)"/>
									<span></span>
		                           	<div ng-if="pageFlag || !editTypeFlag">
				                       	{{layer.layerrePreium | currency}}
				                	</div>
			                    </div>
		                    </td>
		                    
		                    
		                    
                            <td>
                            	<div class="input-group" >
	                            	<input ng-if="editTypeFlag" type="text" style="border:none;" currency
	                            		ng-model="layer.layerReChgPrem"  ng-readonly="true" />
                          			<span></span>
                       			</div>
                            	<div ng-if="pageFlag || !editTypeFlag">
                            		<input type="text"
                            			 ng-readonly="true" style="border:none" ng-model="layer.layerReChgPrem" currency />
		                        </div>
                            </td>
                        </tr>
                    </table>
                </div>

                <!-- <div ng-include="'riskunit/riskunit.intention.nprop.1.tpl.html'"></div> -->
                <div ng-include="'riskunit/riskunit.intention.nprop.3.tpl.html'"></div>

                <hr>
                <h4>鍒嗘湡浠樿垂淇℃伅</h4>
                <a href="" class="btn btn-default" ng-if="(editTypeFlag) && layer.feoXReinsVos.length>0"
                   ng-click="addPlanNprop(riskunitsFacPlyInfo,layer.layerNo)">鐢熸垚缂磋垂璁″垝</a>
	            <div style="overflow: scroll" >
                    <tabset>
                        <tab ng-repeat="recepter in layer.feoXReinsVos"
                                heading="{{recepter.facRiComCde}}"
                                active="recepter.active" disabled="recepter.disabled">
                            <div>
                                鏈熸暟:{{recepter.feoXPlanVos.length}}
                            </div>
                            <table class="table table-bordered" >
                                <thead ng-if="recepter.feoXPlanVos.length>0">
                                	<tr>
	                                    <td nowrap>灞傚彿</td>
	                                    <td nowrap>鍒嗘湡</td>
	                                    <td nowrap>鎺ュ彈浜�</td>
	                                    <td nowrap>浠樻璧锋湡</td>
	                                    <td nowrap>浠樻姝㈡湡</td>
	                                    <td nowrap>鍒嗕繚璐�</td>
	                                    <td width="73">鐧惧垎姣�</td>
	                                    <td nowrap>鍑鸿处鏍囧織</td>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="fac in recepter.feoXPlanVos">
                                    <tr >
                                        <td>{{fac.layerNo}}</td>
                                        <td>{{fac.termNo}}</td>
                                        <td>{{fac.riComCde}}</td>
                                        <td>{{fac.payStrtTm}}</td>
                                        <td>{{fac.payLmtTm}}</td>
                                        <td>{{fac.facComPrm | currency}}</td>
                                        <td><input ng-readonly="true" style="border:none;" ng-model="fac.planShare" ng-init="dealPlanShare()" percentage /></td>
                                        <td>{{fac.accMrk}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </tab>
                    </tabset>
	            </div>
</form>